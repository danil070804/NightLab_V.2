# NightLab Telegram Bot v5.0

Telegram ะฑะพั ะดะปั ะพะฑะผะตะฝะฐ/ะฒัะดะฐัะธ ัะตะบะฒะธะทะธัะพะฒ ั ะฟะพะปะฝะพัะตะฝะฝัะผ Mini App (WebApp).

## ะะพะทะผะพะถะฝะพััะธ

### ะะพั
- ๐ ะัะฑะพั ัััะฐะฝั ะธ ะฑะฐะฝะบะฐ
- ๐ณ ะะฒัะพะฒัะดะฐัะฐ ัะตะบะฒะธะทะธัะพะฒ (ะตัะปะธ ะฝะฐัััะพะตะฝั)
- ๐ค ะกะธััะตะผะฐ ะผะตััะฐะฝัะพะฒ
- ๐ ะัะธะบัะตะฟะปะตะฝะธะต ัะตะบะพะฒ
- โ ะะพะดัะฒะตัะถะดะตะฝะธะต/ะพัะบะปะพะฝะตะฝะธะต ะฟะปะฐัะตะถะตะน
- ๐ Push-ัะฒะตะดะพะผะปะตะฝะธั
- ๐ฅ ะะตัะตัะฐะปัะฝะฐั ะฟัะพะณัะฐะผะผะฐ

### Mini App (WebApp)
- ๐ ะะตะฐะปัะฝะฐั ััะฐัะธััะธะบะฐ ั ะะ
- ๐ค ะัะพัะธะปั ะฟะพะปัะทะพะฒะฐัะตะปั (ะฑะฐะปะฐะฝั, ัะตัะตัะฐะปะบะฐ)
- ๐ ะััะพัะธั ะพะฟะตัะฐัะธะน ั ัะธะปัััะฐะผะธ
- โ ะกะพะทะดะฐะฝะธะต ะทะฐัะฒะพะบ ะฟััะผะพ ะฒ WebApp
- ๐ ะฃะฒะตะดะพะผะปะตะฝะธั ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ

## ะฃััะฐะฝะพะฒะบะฐ

1. ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน:
```bash
git clone <repo-url>
cd nightlab_bot
```

2. ะกะพะทะดะฐะนัะต ะฒะธัััะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate  # Windows
```

3. ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ:
```bash
pip install -r requirements.txt
```

4. ะกะพะทะดะฐะนัะต `.env` ัะฐะนะป:
```bash
cp .env.example .env
# ะััะตะดะฐะบัะธััะนัะต .env
```

5. ะะฐะฟัััะธัะต ะฑะพัะฐ:
```bash
python -m bot.main
```

## ะะฐะฟััะบ API ะดะปั WebApp

```bash
uvicorn bot.api.webapp_api:app --host 0.0.0.0 --port 8000
```

## ะะฐัััะพะนะบะฐ WebApp ะฒ Telegram

1. ะัะบัะพะนัะต @BotFather
2. ะัะฑะตัะธัะต ะฒะฐัะตะณะพ ะฑะพัะฐ
3. ะะฐะถะผะธัะต **Bot Settings** โ **Menu Button** โ **Configure menu button**
4. ะัะฑะตัะธัะต **Configure WebApp**
5. ะะฒะตะดะธัะต URL ะฒะฐัะตะณะพ WebApp

## ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
nightlab_bot/
โโโ bot/
โ   โโโ __init__.py
โ   โโโ main.py           # ะขะพัะบะฐ ะฒัะพะดะฐ ะฑะพัะฐ
โ   โโโ config.py         # ะะพะฝัะธะณััะฐัะธั
โ   โโโ db.py             # ะะฐะฑะพัะฐ ั ะะ
โ   โโโ states.py         # FSM ัะพััะพัะฝะธั
โ   โโโ utils.py          # ะฃัะธะปะธัั
โ   โโโ keyboards.py      # ะะปะฐะฒะธะฐัััั
โ   โโโ notifications.py  # Push-ัะฒะตะดะพะผะปะตะฝะธั
โ   โโโ handlers/
โ   โ   โโโ __init__.py
โ   โ   โโโ user.py       # ะะพะปัะทะพะฒะฐัะตะปััะบะธะต ะบะพะผะฐะฝะดั
โ   โ   โโโ apps.py       # ะะฐัะฒะบะธ
โ   โ   โโโ merchant.py   # ะะตััะฐะฝัั
โ   โ   โโโ payments.py   # ะะปะฐัะตะถะธ
โ   โ   โโโ admin.py      # ะะดะผะธะฝ-ะฟะฐะฝะตะปั
โ   โ   โโโ chat.py       # ะงะฐั
โ   โโโ api/
โ       โโโ webapp_api.py # FastAPI ะดะปั WebApp
โโโ webapp/
โ   โโโ index.html        # WebApp ะธะฝัะตััะตะนั
โ   โโโ styles.css        # ะกัะธะปะธ
โ   โโโ app.js            # ะะพะณะธะบะฐ WebApp
โโโ requirements.txt
โโโ .env.example
โโโ README.md
```

## ะะพะผะฐะฝะดั ะฑะพัะฐ

- `/start` - ะะฐัะฐัั ัะฐะฑะพัั
- `/admin` - ะะดะผะธะฝ-ะฟะฐะฝะตะปั (ัะพะปัะบะพ ะดะปั ะฐะดะผะธะฝะพะฒ)
- `/chatid` - ะฃะทะฝะฐัั ID ัะฐัะฐ
- `/health` - ะัะพะฒะตัะบะฐ ัะฐะฑะพัั

## API Endpoints

### ะัะฑะปะธัะฝัะต
- `GET /api/stats` - ะะฑัะฐั ััะฐัะธััะธะบะฐ
- `GET /api/countries` - ะกะฟะธัะพะบ ัััะฐะฝ
- `GET /api/banks?country_id=` - ะกะฟะธัะพะบ ะฑะฐะฝะบะพะฒ

### ะขัะตะฑััั ะฐะฒัะพัะธะทะฐัะธะธ (initData)
- `GET /api/user/profile` - ะัะพัะธะปั ะฟะพะปัะทะพะฒะฐัะตะปั
- `GET /api/user/stats` - ะกัะฐัะธััะธะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปั
- `GET /api/applications` - ะกะฟะธัะพะบ ะทะฐัะฒะพะบ
- `POST /api/applications/create` - ะกะพะทะดะฐัั ะทะฐัะฒะบั
- `GET /api/notifications` - ะฃะฒะตะดะพะผะปะตะฝะธั
- `POST /api/notifications/{id}/read` - ะัะพัะธัะฐัั ัะฒะตะดะพะผะปะตะฝะธะต

## Push-ัะฒะตะดะพะผะปะตะฝะธั

ะะพั ะพัะฟัะฐะฒะปัะตั ัะฒะตะดะพะผะปะตะฝะธั ะฟัะธ:
- โ ะัะดะฐัะต ัะตะบะฒะธะทะธัะพะฒ
- โ ะะพะดัะฒะตัะถะดะตะฝะธะธ ะฟะปะฐัะตะถะฐ
- โ ะัะบะปะพะฝะตะฝะธะธ ะฟะปะฐัะตะถะฐ
- โฐ ะััะตัะตะฝะธะธ ะฒัะตะผะตะฝะธ ะทะฐัะฒะบะธ
- ๐ ะะพะฒะพะผ ัะตัะตัะฐะปะต

## ะะธัะตะฝะทะธั

MIT
